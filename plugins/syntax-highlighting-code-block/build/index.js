!function(){"use strict";var e=window.wp.hooks;function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},t.apply(this,arguments)}var n=window.wp.element,l=window.wp.i18n,i=window.wp.blockEditor,a=window.wp.components,o=window.lodash;const r=syntaxHighlightingCodeBlockLanguageNames,s=e=>{const{highlightedLines:l,...a}=e,o=(0,n.useRef)(),[r,s]=(0,n.useState)({});return(0,n.useEffect)((()=>{if(null!==o.current){const e=o.current,t=window.getComputedStyle(e);s({fontFamily:t.getPropertyValue("font-family"),fontSize:t.getPropertyValue("font-size"),overflow:"hidden",overflowWrap:t.getPropertyValue("overflow-wrap"),resize:t.getPropertyValue("resize")})}}),[a.style]),(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.RichText,t({ref:o},a)),(0,n.createElement)("div",{"aria-hidden":!0,className:"code-block-overlay",style:r},(a.value||"").split(/\n/).map(((e,t)=>{let i="loc";return l.has(t)&&(i+=" highlighted"),(0,n.createElement)("span",{key:t,className:i,dangerouslySetInnerHTML:{__html:e||" "}})}))))},c=e=>{const t=new Set;if(!e||0===e.trim().length)return t;let n;const l=e.replace(/\s/,"").split(",");for(n of l)if(n.indexOf("-")>=0){let e;const l=n.split("-");if(2===l.length)for(e=+l[0];e<=+l[1];++e)t.add(e-1)}else t.add(+n-1);return t};function h(e){let{attributes:t,setAttributes:h,onRemove:g}=e;const d=(0,i.useBlockProps)(),u=(0,o.sortBy)(Object.entries(r).map((e=>{let[t,n]=e;return{label:n,value:t}})),(e=>e.label.toLowerCase())),p={tagName:"code",value:t.content,onChange:e=>h({content:e}),onRemove:g,placeholder:(0,l.__)("Write codeâ€¦"),"aria-label":(0,l.__)("Code"),preserveWhiteSpace:!0,__unstablePastePlainText:!0,highlightedLines:c(t.highlightedLines),className:["shcb-textedit",t.wrapLines?"shcb-textedit-wrap-lines":""].join(" "),style:d.style};return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.InspectorControls,{key:"controls"},(0,n.createElement)(a.PanelBody,{title:(0,l.__)("Syntax Highlighting","syntax-highlighting-code-block"),initialOpen:!0},(0,n.createElement)(a.PanelRow,null,(0,n.createElement)(a.SelectControl,{label:(0,l.__)("Language","syntax-highlighting-code-block"),value:t.language,options:[{label:(0,l.__)("Auto-detect","syntax-highlighting-code-block"),value:""},...u],onChange:e=>{h({language:e})}})),(0,n.createElement)(a.PanelRow,null,(0,n.createElement)(a.TextControl,{label:(0,l.__)("Highlighted Lines","syntax-highlighting-code-block"),value:t.highlightedLines,onChange:e=>{h({highlightedLines:e})},help:(0,l.__)("Supported format: 1, 3-5","syntax-highlighting-code-block")})),(0,n.createElement)(a.PanelRow,null,(0,n.createElement)(a.CheckboxControl,{label:(0,l.__)("Show Line Numbers","syntax-highlighting-code-block"),checked:t.showLineNumbers,onChange:e=>{h({showLineNumbers:e})}})),(0,n.createElement)(a.PanelRow,null,(0,n.createElement)(a.CheckboxControl,{label:(0,l.__)("Wrap Lines","syntax-highlighting-code-block"),checked:t.wrapLines,onChange:e=>{h({wrapLines:e})}})))),(0,n.createElement)("pre",d,(0,n.createElement)(s,p)))}(0,e.addFilter)("blocks.registerBlockType","westonruter/syntax-highlighting-code-block-type",(e=>syntaxHighlightingCodeBlockType.name!==e.name?e:{...e,attributes:{...e.attributes,...syntaxHighlightingCodeBlockType.attributes},edit:h,deprecated:[...e.deprecated||[],{attributes:{...e.attributes,...syntaxHighlightingCodeBlockType.deprecated},isEligible(e){return Object.keys(e).some((e=>syntaxHighlightingCodeBlockType.deprecated.hasOwnProperty(e)))},migrate(e,t){return[{...e,highlightedLines:e.selectedLines,showLineNumbers:e.showLines},t]}}]}))}();