(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.d(t,{default:()=>S});const n=window.wp.element,o=window.wp.data,l=window.wp.deprecated;var s=e.n(l);const c=window.lodash,a=window.wp.compose,i=window.wp.i18n,u=window.wp.apiFetch;var d=e.n(u);const p=window.wp.url,w=window.wp.components,m=window.wp.blocks,f={};function v(e){let{className:t}=e;return(0,n.createElement)(w.Placeholder,{className:t},(0,i.__)("Block rendered as empty."))}function h(e){let{response:t,className:r}=e;const o=(0,i.sprintf)(// translators: %s: error message describing the problem
(0,i.__)("Error loading block: %s"),t.errorMsg);return(0,n.createElement)(w.Placeholder,{className:r},o)}function y(e){let{children:t,showLoader:r}=e;return(0,n.createElement)("div",{style:{position:"relative"}},r&&(0,n.createElement)("div",{style:{position:"absolute",top:"50%",left:"50%",marginTop:"-9px",marginLeft:"-9px"}},(0,n.createElement)(w.Spinner,null)),(0,n.createElement)("div",{style:{opacity:r?"0.3":1}},t))}function E(e){const{attributes:t,block:o,className:l,httpMethod:s="GET",urlQueryArgs:i,skipBlockSupportAttributes:u=!1,EmptyResponsePlaceholder:w=v,ErrorResponsePlaceholder:E=h,LoadingResponsePlaceholder:g=y}=e,b=(0,n.useRef)(!0),[S,P]=(0,n.useState)(!1),R=(0,n.useRef)(),[k,T]=(0,n.useState)(null),_=(0,a.usePrevious)(e),[N,O]=(0,n.useState)(!1);function M(){var e,r;if(!b.current)return;O(!0);let n=t&&(0,m.__experimentalSanitizeBlockAttributes)(o,t);u&&(n=function(e){const{backgroundColor:t,borderColor:r,fontFamily:n,fontSize:o,gradient:l,textColor:s,className:c,...a}=e,{border:i,color:u,elements:d,spacing:p,typography:w,...m}=(null==e?void 0:e.style)||f;return{...a,style:m}}(n));const l="POST"===s,c=l?null:null!==(e=n)&&void 0!==e?e:null,a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,p.addQueryArgs)(`/wp/v2/block-renderer/${e}`,{context:"edit",...null!==t?{attributes:t}:{},...r})}(o,c,i),w=l?{attributes:null!==(r=n)&&void 0!==r?r:null}:null,v=R.current=d()({path:a,data:w,method:l?"POST":"GET"}).then((e=>{b.current&&v===R.current&&e&&T(e.rendered)})).catch((e=>{b.current&&v===R.current&&T({error:!0,errorMsg:e.message})})).finally((()=>{b.current&&v===R.current&&O(!1)}));return v}const A=(0,a.useDebounce)(M,500);(0,n.useEffect)((()=>()=>{b.current=!1}),[]),(0,n.useEffect)((()=>{void 0===_?M():(0,c.isEqual)(_,e)||A()})),(0,n.useEffect)((()=>{if(!N)return;const e=setTimeout((()=>{P(!0)}),1e3);return()=>clearTimeout(e)}),[N]);const L=!!k,x=""===k,j=null==k?void 0:k.error;return N?(0,n.createElement)(g,r({},e,{showLoader:S}),L&&(0,n.createElement)(n.RawHTML,{className:l},k)):x||!L?(0,n.createElement)(w,e):j?(0,n.createElement)(E,r({response:k},e)):(0,n.createElement)(n.RawHTML,{className:l},k)}const g={},b=(0,o.withSelect)((e=>{const t=e("core/editor");if(t){const e=t.getCurrentPostId();if(e&&"number"==typeof e)return{currentPostId:e}}return g}))((e=>{let{urlQueryArgs:t=g,currentPostId:o,...l}=e;const s=(0,n.useMemo)((()=>o?{post_id:o,...t}:t),[o,t]);return(0,n.createElement)(E,r({urlQueryArgs:s},l))}));window&&window.wp&&window.wp.components&&(window.wp.components.ServerSideRender=(0,n.forwardRef)(((e,t)=>(s()("wp.components.ServerSideRender",{version:"6.2",since:"5.3",alternative:"wp.serverSideRender"}),(0,n.createElement)(b,r({},e,{ref:t}))))));const S=b;(window.wp=window.wp||{}).serverSideRender=t.default})();
//# sourceMappingURL=index.min.js.map