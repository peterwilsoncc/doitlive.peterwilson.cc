(()=>{"use strict";const e=window.wp.interactivity,t=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];(0,e.store)({actions:{core:{image:{showLightbox:({context:e,event:t})=>{if(!e.core.image.imageLoaded)return;e.core.image.initialized=!0,e.core.image.lastFocusedElement=window.document.activeElement,e.core.image.scrollDelta=0,e.core.image.lightboxEnabled=!0,"zoom"===e.core.image.lightboxAnimation&&function(e,t,i){let o="none"!==t.core.image.targetWidth?t.core.image.targetWidth:i.target.nextElementSibling.naturalWidth,a="none"!==t.core.image.targetHeight?t.core.image.targetHeight:i.target.nextElementSibling.naturalHeight;const n=window.innerHeight,r=n-80,l=window.innerWidth;let c=0;l>480?c=40:l>1920&&(c=80);const g=l-2*c,m=Math.abs(Math.min(g-o,0)),d=Math.abs(Math.min(r-a,0));(m>0||d>0)&&(o/a>g/r?(o=g,a=o*e.naturalHeight/e.naturalWidth):(a=r,o=a*e.naturalWidth/e.naturalHeight));const{x:s,y:h}=i.target.nextElementSibling.getBoundingClientRect(),u=i.target.nextElementSibling.offsetWidth/o,b=i.target.nextElementSibling.offsetHeight/a;let x=0;x=o>=g?c:(l-o)/2;let f=0;f=a>=r?40:(n-a)/2;const p=document.documentElement;p.style.setProperty("--lightbox-scale-width",u),p.style.setProperty("--lightbox-scale-height",b),p.style.setProperty("--lightbox-image-max-width",o+"px"),p.style.setProperty("--lightbox-image-max-height",a+"px"),p.style.setProperty("--lightbox-initial-left-position",s+"px"),p.style.setProperty("--lightbox-initial-top-position",h+"px"),p.style.setProperty("--lightbox-target-left-position",x+"px"),p.style.setProperty("--lightbox-target-top-position",f+"px")}(t.target.nextElementSibling,e,t),document.documentElement.classList.add("has-lightbox-open"),e.core.image.preloadInitialized=!0;const i=document.createElement("img");i.onload=function(){e.core.image.activateLargeImage=!0},i.setAttribute("src",e.core.image.imageUploadedSrc)},hideLightbox:async({context:e,event:t})=>{if(e.core.image.hideAnimationEnabled=!0,e.core.image.lightboxEnabled){if("fade"===e.core.image.lightboxAnimation){if(e.core.image.scrollDelta+=t.deltaY,"mousewheel"===t.type&&Math.abs(window.scrollY-e.core.image.scrollDelta)<10)return}else if("zoom"===e.core.image.lightboxAnimation){const e=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(t,e)},setTimeout((function(){window.onscroll=function(){}}),400)}document.documentElement.classList.remove("has-lightbox-open"),e.core.image.lightboxEnabled=!1,e.core.image.lastFocusedElement.focus()}},handleKeydown:({context:e,actions:t,event:i})=>{e.core.image.lightboxEnabled&&("Tab"!==i.key&&9!==i.keyCode||(i.shiftKey&&window.document.activeElement===e.core.image.firstFocusableElement?(i.preventDefault(),e.core.image.lastFocusableElement.focus()):i.shiftKey||window.document.activeElement!==e.core.image.lastFocusableElement||(i.preventDefault(),e.core.image.firstFocusableElement.focus())),"Escape"!==i.key&&27!==i.keyCode||t.core.image.hideLightbox({context:e,event:i}))},preloadLightboxImage:({context:e})=>{e.core.image.preloadInitialized||(e.core.image.preloadInitialized=!0,document.createElement("img").setAttribute("src",e.core.image.imageUploadedSrc))}}}},selectors:{core:{image:{roleAttribute:({context:e})=>e.core.image.lightboxEnabled?"dialog":"",responsiveImgSrc:({context:e})=>e.core.image.activateLargeImage&&e.core.image.hideAnimationEnabled?"":e.core.image.imageCurrentSrc,enlargedImgSrc:({context:e})=>e.core.image.initialized?e.core.image.imageUploadedSrc:""}}},effects:{core:{image:{setCurrentSrc:({context:e,ref:t})=>{t.complete?(e.core.image.imageLoaded=!0,e.core.image.imageCurrentSrc=t.currentSrc):t.addEventListener("load",(function(){e.core.image.imageLoaded=!0,e.core.image.imageCurrentSrc=this.currentSrc}))},initLightbox:async({context:e,ref:i})=>{if(e.core.image.figureRef=i.querySelector("figure"),e.core.image.imageRef=i.querySelector("img"),e.core.image.lightboxEnabled){const o=i.querySelectorAll(t);e.core.image.firstFocusableElement=o[0],e.core.image.lastFocusableElement=o[o.length-1],i.querySelector(".close-button").focus()}}}}}})})();
//# sourceMappingURL=view-interactivity.min.js.map