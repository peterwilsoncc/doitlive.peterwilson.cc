{"version":3,"file":"./blocks/image/interactivity.min.js","mappings":"yHAKA,MAAMA,EAAqB,CAC1B,UACA,aACA,gEACA,4CACA,8CACA,4CACA,SACA,SACA,QACA,oBACA,oCAGDC,EAAAA,EAAAA,GAAO,CACNC,QAAS,CACRC,KAAM,CACLC,MAAO,CACNC,aAAc,EAAIC,cACjBA,EAAQH,KAAKC,MAAMG,aAAc,EACjCD,EAAQH,KAAKC,MAAMI,iBAAkB,EACrCF,EAAQH,KAAKC,MAAMK,mBAClBC,OAAOC,SAASC,cACjBN,EAAQH,KAAKC,MAAMS,eAAiBH,OAAOI,QAC3CH,SAASI,gBAAgBC,UAAUC,IAClC,oBADD,EAIDC,aAAcC,OAAUb,UAASc,YAChC,GAAKd,EAAQH,KAAKC,MAAMI,gBAAkB,CAEzC,GACgB,eAAfY,EAAMC,MACNC,KAAKC,IACJb,OAAOI,QACNR,EAAQH,KAAKC,MAAMS,gBACjB,EAEJ,OAEDF,SAASI,gBAAgBC,UAAUQ,OAClC,qBAGDlB,EAAQH,KAAKC,MAAMI,iBAAkB,EACrCF,EAAQH,KAAKC,MAAMK,mBAAmBgB,OACtC,GAEFC,cAAe,EAAIpB,UAASJ,UAASkB,YAC/Bd,EAAQH,KAAKC,MAAMI,kBACJ,QAAdY,EAAMO,KAAmC,IAAlBP,EAAMQ,UAGhCR,EAAMS,UACNnB,OAAOC,SAASC,gBACfN,EAAQH,KAAKC,MAAM0B,uBAEpBV,EAAMW,iBACNzB,EAAQH,KAAKC,MAAM4B,qBAAqBP,SAEtCL,EAAMS,UACRnB,OAAOC,SAASC,gBACfN,EAAQH,KAAKC,MAAM4B,uBAEpBZ,EAAMW,iBACNzB,EAAQH,KAAKC,MAAM0B,sBAAsBL,UAIxB,WAAdL,EAAMO,KAAsC,KAAlBP,EAAMQ,SACpC1B,EAAQC,KAAKC,MAAMc,aAAc,CAChCZ,UACAc,UAGF,KAKLa,UAAW,CACV9B,KAAM,CACLC,MAAO,CACN8B,cAAe,EAAI5B,aACXA,EAAQH,KAAKC,MAAMI,gBAAkB,SAAW,MAK3D2B,QAAS,CACRhC,KAAM,CACLC,MAAO,CACNgC,aAAcjB,OAAUb,UAAS+B,UAChC,GAAK/B,EAAQH,KAAKC,MAAMI,gBAAkB,CACzC,MAAM8B,EACLD,EAAIE,iBAAkBvC,GACvBM,EAAQH,KAAKC,MAAM0B,sBAClBQ,EAAmB,GACpBhC,EAAQH,KAAKC,MAAM4B,qBAClBM,EAAmBA,EAAkBE,OAAS,GAE/CH,EAAII,cAAe,iBAAkBhB,OACrC,O","sources":["webpack://wp/./packages/block-library/src/image/interactivity.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { store } from '../utils/interactivity';\n\nconst focusableSelectors = [\n\t'a[href]',\n\t'area[href]',\n\t'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\n\t'select:not([disabled]):not([aria-hidden])',\n\t'textarea:not([disabled]):not([aria-hidden])',\n\t'button:not([disabled]):not([aria-hidden])',\n\t'iframe',\n\t'object',\n\t'embed',\n\t'[contenteditable]',\n\t'[tabindex]:not([tabindex^=\"-\"])',\n];\n\nstore( {\n\tactions: {\n\t\tcore: {\n\t\t\timage: {\n\t\t\t\tshowLightbox: ( { context } ) => {\n\t\t\t\t\tcontext.core.image.initialized = true;\n\t\t\t\t\tcontext.core.image.lightboxEnabled = true;\n\t\t\t\t\tcontext.core.image.lastFocusedElement =\n\t\t\t\t\t\twindow.document.activeElement;\n\t\t\t\t\tcontext.core.image.scrollPosition = window.scrollY;\n\t\t\t\t\tdocument.documentElement.classList.add(\n\t\t\t\t\t\t'has-lightbox-open'\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\thideLightbox: async ( { context, event } ) => {\n\t\t\t\t\tif ( context.core.image.lightboxEnabled ) {\n\t\t\t\t\t\t// If scrolling, wait a moment before closing the lightbox.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tevent.type === 'mousewheel' &&\n\t\t\t\t\t\t\tMath.abs(\n\t\t\t\t\t\t\t\twindow.scrollY -\n\t\t\t\t\t\t\t\t\tcontext.core.image.scrollPosition\n\t\t\t\t\t\t\t) < 5\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdocument.documentElement.classList.remove(\n\t\t\t\t\t\t\t'has-lightbox-open'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tcontext.core.image.lightboxEnabled = false;\n\t\t\t\t\t\tcontext.core.image.lastFocusedElement.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\thandleKeydown: ( { context, actions, event } ) => {\n\t\t\t\t\tif ( context.core.image.lightboxEnabled ) {\n\t\t\t\t\t\tif ( event.key === 'Tab' || event.keyCode === 9 ) {\n\t\t\t\t\t\t\t// If shift + tab it change the direction\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tevent.shiftKey &&\n\t\t\t\t\t\t\t\twindow.document.activeElement ===\n\t\t\t\t\t\t\t\t\tcontext.core.image.firstFocusableElement\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tcontext.core.image.lastFocusableElement.focus();\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t! event.shiftKey &&\n\t\t\t\t\t\t\t\twindow.document.activeElement ===\n\t\t\t\t\t\t\t\t\tcontext.core.image.lastFocusableElement\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tcontext.core.image.firstFocusableElement.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( event.key === 'Escape' || event.keyCode === 27 ) {\n\t\t\t\t\t\t\tactions.core.image.hideLightbox( {\n\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n\tselectors: {\n\t\tcore: {\n\t\t\timage: {\n\t\t\t\troleAttribute: ( { context } ) => {\n\t\t\t\t\treturn context.core.image.lightboxEnabled ? 'dialog' : '';\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n\teffects: {\n\t\tcore: {\n\t\t\timage: {\n\t\t\t\tinitLightbox: async ( { context, ref } ) => {\n\t\t\t\t\tif ( context.core.image.lightboxEnabled ) {\n\t\t\t\t\t\tconst focusableElements =\n\t\t\t\t\t\t\tref.querySelectorAll( focusableSelectors );\n\t\t\t\t\t\tcontext.core.image.firstFocusableElement =\n\t\t\t\t\t\t\tfocusableElements[ 0 ];\n\t\t\t\t\t\tcontext.core.image.lastFocusableElement =\n\t\t\t\t\t\t\tfocusableElements[ focusableElements.length - 1 ];\n\n\t\t\t\t\t\tref.querySelector( '.close-button' ).focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n} );\n"],"names":["focusableSelectors","store","actions","core","image","showLightbox","context","initialized","lightboxEnabled","lastFocusedElement","window","document","activeElement","scrollPosition","scrollY","documentElement","classList","add","hideLightbox","async","event","type","Math","abs","remove","focus","handleKeydown","key","keyCode","shiftKey","firstFocusableElement","preventDefault","lastFocusableElement","selectors","roleAttribute","effects","initLightbox","ref","focusableElements","querySelectorAll","length","querySelector"],"sourceRoot":""}